# Data object Observer

__Reactive__ is a tiny utility library for transforming any data class into an Observable data object, through the use of a __Observable__ listener. This is in a lot of ways similar to the __Proxy__ object in __JavaScript__, for those who may be familiar with it.

This functionality can be extended to load the transformed bytecode during the pre-main phase of a java program, or even generate class files during the build phase (with gradle or maven) through use of plugins. There are currently no plugins created yet for the build tools.

The example shown here illustrates using this utility in standalone mode in a java program.

## Example data class

This class is used in the application to shuttle data back and forth, and it is this data whose values a user may want to keep track of.

```java
public class Data {

    private String name;
    private boolean verified;

    public Data() {
    }

    public Data(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public boolean isVerified() {
        return verified;
    }

    public void setVerified(boolean verified) {
        this.verified = verified;
    }
}
```

## Example of Observable instance

This object is created by the user to receive data events whenever setters or getters in the data object of interest are accessed.

```java
Observable watch = new Observable() {

    @Override
    public void set(Object source, String field, Object oldValue, Object newValue) {
        System.out.printf("Setting value of property '%s' in class '%s' from %s to %s\n", field,
                source.getClass().getName(), oldValue, newValue);
    }

    @Override
    public void get(Object source, String field, Object value) {
        System.out.printf("getting value of property '%s' in class '%s' with value %s\n", field,
                source.getClass().getName(), value);
    }
}
```

## Example of transformation 

The transformation of a class into a participating Observable is done be passing the target class and Observer instance to the static __observe__ method of the __Reactive__ class.

```java
public class RunObservable {

    public static void main(String[] args) throws IOException {
        generateRuntime();
    }

    public static void generateRuntime() throws IOException {
        List<Data> list = new ArrayList<>();
        for (int i = 0; i < 3; i++) {
            Data newData = Reactive.observe(Data.class, watch);
            newData.setName("Stephano_" + i);
            newData.setVerified(true);
            list.add(newData);
        }
        list.forEach(a -> System.out.printf("Is %s verified? %s", a.getName(), a.isVerified()));
    }
}
```

## Output generated by the example above

```bash
Setting value of property 'name' in class 'com.akilisha.reactive.Data0' from null to Stephano_0
Setting value of property 'verified' in class 'com.akilisha.reactive.Data0' from false to true
Setting value of property 'name' in class 'com.akilisha.reactive.Data0' from null to Stephano_1
Setting value of property 'verified' in class 'com.akilisha.reactive.Data0' from false to true
Setting value of property 'name' in class 'com.akilisha.reactive.Data0' from null to Stephano_2
Setting value of property 'verified' in class 'com.akilisha.reactive.Data0' from false to true
getting value of property 'name' in class 'com.akilisha.reactive.Data0' with value Stephano_0
getting value of property 'verified' in class 'com.akilisha.reactive.Data0' with value true
Is Stephano_0 verified? truegetting value of property 'name' in class 'com.akilisha.reactive.Data0' with value Stephano_1
getting value of property 'verified' in class 'com.akilisha.reactive.Data0' with value true
Is Stephano_1 verified? truegetting value of property 'name' in class 'com.akilisha.reactive.Data0' with value Stephano_2
getting value of property 'verified' in class 'com.akilisha.reactive.Data0' with value true
Is Stephano_2 verified? true
```

## Generating the Observable class file

This can optionally be done during the build phase of a java application so that the class files may be loaded by the default application classloader during normal startup.

```java
public class GenObservable {

    public static void main(String[] args) throws IOException {
        generateToFile(Reactive.defaultBuildPath, String.valueOf(LocalTime.now().getSecond()));
    }

    public static void generateToFile(String buildPath, String discriminator) {
        Reactive.generate(Data.class, "app/" + buildPath, discriminator);
    }
}
```

## Summary 

This idea of the Observable utility can be extrapolated further and used for example, to generate data events, which would effectively create a data stream emanating from data changing in the observed instances.

The sky is truly the limit in what one can do!